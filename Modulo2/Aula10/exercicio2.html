<!DOCTYPE html>
<html lang="pt-br" prefix="og: https://ogp.me/ns#">
    <head>
        <meta charset="utf-8">
        <title>Gameplay Mobile Legends : Gloo</title>
        <meta property="og:title" content="Gameplay Mobile Legends : Gloo" />
        <meta property="og:description" content="Um video divertido com os melhores momentos de duas gameplays com o herói Gloo." />
        <meta property="og:type" content="video.other" />
        <meta property="og:url" content="https://luisgustavoczp.github.io/my_first_steps/Modulo2/Aula10/exercicio2.html" />
        <meta property="og:image" content="arcadia.jpg" />
        <meta property="og:image:width" content="300" />
        <meta property="og:image:height" content="300" />
    </head>
    <body style="display: flex; flex-direction: column; align-content: center;">
        <h1 style="text-align: center;">Gameplay Mobile Legends : Gloo</h1>
        <p style="text-align: center;">Um video divertido com os melhores momentos de duas gameplays com o herói Gloo.</p>
        <video id="videoplayer" poster="arcadia.jpg" height="400" controls>
            Desculpa, o seu navegador não suporta vídeos incorporados
        </video>
        <button id="videobutton" onclick="nextVideo ()">Proximo</button>
        <section id="audiosector" style="display:flex; align-self: center;">
            <h4>Ouça apenas a musica</h4>
            <audio id="audioplayer" src="thefatrat-arcadia-chapter2.ogg" controls>
                O seu navegador não suporta o elemento <code>audio</code>.
            </audio>
        </section>
    </body>
    <script>
        var pause = true;
        var lstorage = localStorage.getItem("gameplaynumber");
        var videoNumber = 0;
        if(lstorage != null)
        {
            videoNumber = parseInt(lstorage);
        }
        
        var videos = ["mobilelegendsgloo.mp4", "mobilelegendsgloo0.mp4", "mobilelegendsgloo1.mp4", "mobilelegendsgloo2.mp4", "mobilelegendsgloo3.mp4", "mobilelegendsgloo4.mp4"];
        var audios = ["thefatrat-arcadia-chapter2.ogg", "thefatrat-timelapse.mp3"];
        var videoPlayer = document.getElementById("videoplayer");
        var audioPlayer = document.getElementById("audioplayer");
        //var videoNextButton = document.getElementById("videobutton");
        var audioSector = document.getElementById("audiosector");
        
        //videoPlayer.onload = onVideoLoad;
        videoPlayer.onpause = onVideoPause;
        //videoPlayer.oncanplay = onVideoCanPlay;
        videoPlayer.onplay = onVideoPlay;
        
        videoPlayer.onended = onVideoEnded;
        audioPlayer.onended = onAudioEnded;

        videoPlayer.src = videos[videoNumber++];
        localStorage.setItem("gameplaynumber", videoNumber);

        function onVideoPlay (evt)
        {
            pause = false;
            audioPlayer.play();
            videoPlayer.playbackRate = 2;
            //audioSector.setAttribute("hidden", "");
        }

        function onVideoPause (evt)
        {
            pause = true;
            audioPlayer.pause();
            //audioSector.removeAttribute("hidden");
        }

        function onVideoEnded (evt)
        {
            audioPlayer.pause();
            if(videoNumber >= videos.length) videoNumber = 0;
            videoPlayer.src = videos[videoNumber++];
            localStorage.setItem("gameplaynumber", videoNumber);
            videoPlayer.play();
        }

        function onAudioEnded (evt)
        {
            audioPlayer.play();
            audioPlayer.currentTime = 60;
            
        }

        function nextVideo ()
        {
            if(videoNumber >= videos.length) videoNumber = 0;
            videoPlayer.src = videos[videoNumber++];
            videoPlayer.play();
            //pause = !pause;
            //videoButton.textContent = pause ? "Play" : "Pause";
            //if(!pause) videoPlayer.play();
            //else videoPlayer.pause();
        }
    </script>
</html>